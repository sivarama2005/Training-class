<!DOCTYPE html>
<html>
<head>
    <title>City Weather (Open-Meteo)</title>
    <style>
        #con{
            text-align: center;
            width: 500px;
            height: 500px;
            margin: 50px auto;
            overflow: hidden;
        }
        body{
            background-image: url("AdobeStock_359999296-sized.jpg");
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
        }
    </style>
</head>
<body>
    <div id="con">
    <h1 style="text-align: center;">City Weather</h1>
    <label for="city" style="font-size: large; font-weight: bold; color: black;">Enter City Name</label>

    <input type="text" id="city"  placeholder="Enter city name" style="width: 200px; height: 25px;"><br>
    <button onclick="getWeather()" style="margin: 10px; width: 100px; height: 25px; background-color:aqua;">Get Weather</button>

    <p id="result"></p>
        </div>
    <script>
        function getWeather() {
            const city = document.getElementById("city").value;
            if (!city) {
                document.getElementById("result").innerText =
                    "Please enter a city name.";
                return;
            }

            // Step 1: City ‚Üí Latitude & Longitude
            const geoURL = `https://geocoding-api.open-meteo.com/v1/search?name=${city}&count=1`;

            fetch(geoURL)
                .then(res => res.json())
                .then(geoData => {
                    if (!geoData.results) {
                        document.getElementById("result").innerText =
                            "City not found.";
                        return;
                    }

                    const lat = geoData.results[0].latitude;
                    const lon = geoData.results[0].longitude;
                    const cityName = geoData.results[0].name;

                    // Step 2: Weather API
                    const weatherURL =
                        `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`;

                    return fetch(weatherURL).then(res => res.json())
                        .then(weatherData => {
                            const temp = weatherData.current_weather.temperature;
                            const wind = weatherData.current_weather.windspeed;
                            const code = weatherData.current_weather.weathercode;

                            document.getElementById("result").innerHTML =
                                `üìç City: ${cityName}<br>
                                 üå° Temperature: ${temp} ¬∞C<br>
                                 üí® Wind Speed: ${wind} km/h<br>
                                 üå• Weather: ${getWeatherText(code)}`;
                        });
                })
                .catch(() => {
                    document.getElementById("result").innerText =
                        "Error fetching weather data.";
                });
        }

        function getWeatherText(code) {
            const map = {
                0: "Clear sky",
                1: "Mainly clear",
                2: "Partly cloudy",
                3: "Overcast",
                45: "Fog",
                48: "Rime fog",
                51: "Light drizzle",
                61: "Rain",
                71: "Snow",
                95: "Thunderstorm"
            };
            return map[code] || "Unknown";
        }
    </script>
</body>
</html>
